<!DOCTYPE html>
<html>
    <head>
        <title>tictactoe</title>
        <style>
            html {
                box-sizing: border-box;
                font-size: 14px;
            }
            .board {
                width: 15rem;
            }
            .board-row {
                display: flex;
                height: 5rem;
                width: 15rem;
            }
            .board-cell {
                flex: 1 1 0;
                height: 100%;
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <div class="board">
            <div class="board-row">
                <div class="board-cell"></div>
                <div class="board-cell"></div>
                <div class="board-cell"></div>
            </div>
            <div class="board-row">
                <div class="board-cell"></div>
                <div class="board-cell"></div>
                <div class="board-cell"></div>
            </div>
            <div class="board-row">
                <div class="board-cell"></div>
                <div class="board-cell"></div>
                <div class="board-cell"></div>
            </div>
        </div>
        <script>
            const cellMap= [];
            let userValue= "x";

            function addBoardCellListeners () {
                const boardcells= document.getElementsByClassName("board-cell");
                cellMap.length= 9;
                cellMap.fill(null);

                for (let i=0; i<9; i++) {
                    boardcells[i].addEventListener("click", function(){
                        boardcells[i].innerHTML= userValue;
                        cellMap[i]= userValue;
                        if (userValue== "x"){
                            userValue= "O";
                        }
                        else if (userValue== "O"){
                            userValue= "x";
                        }
                        checkForWinner();
                    });

                }
            }

            function checkForWinner () {
                for (let i=0; i<Math.sqrt(cellMap.length); i++){
                    const idx= i*Math.sqrt(cellMap.length);
                    if (cellMap[idx] && cellMap[idx]==cellMap[idx+1] && cellMap[idx]==cellMap[idx+2]){
                        alert(`${cellMap[idx]} wins`);
                        break;
                    }
                }
            }

            window.addEventListener("load", addBoardCellListeners);
        </script>
    </body>

</html>